From 16b87dac42a9ab07dd2340333cebc21c54b1dd34 Mon Sep 17 00:00:00 2001
From: aroflcoppter <contact@dankium.ca>
Date: Sun, 8 Jun 2025 23:10:21 -0230
Subject: [PATCH] adblock disable telemetry

Copyright (C) 2006-present eyeo GmbH.

---
 components/adblock/core/BUILD.gn              | 32 -------------------
 .../activeping_telemetry_topic_provider.cc    |  2 +-
 2 files changed, 1 insertion(+), 33 deletions(-)

diff --git a/components/adblock/core/BUILD.gn b/components/adblock/core/BUILD.gn
index 0d2f7511c4e52..40436119bf811 100644
--- a/components/adblock/core/BUILD.gn
+++ b/components/adblock/core/BUILD.gn
@@ -49,36 +49,6 @@ source_set("schema_hash") {
   deps = [ ":generate_schema_hash" ]
 }
 
-config("eyeo_telemetry_config") {
-  defines = []
-
-  if (eyeo_telemetry_server_url != "") {
-    # Explicitly setting Telemetry server URL, used for testing with a test
-    # server.
-    defines += [ "EYEO_TELEMETRY_SERVER_URL=\"$eyeo_telemetry_server_url\"" ]
-  } else {
-    # Implicitly setting production Telemetry server URL based on
-    # eyeo_telemetry_client_id (or a default client id as a fallback).
-    if (eyeo_telemetry_client_id != "") {
-      defines += [ "EYEO_TELEMETRY_CLIENT_ID=\"$eyeo_telemetry_client_id\"" ]
-    } else {
-      print("WARNING! gn arg eyeo_telemetry_client_id is not set. " +
-            "Users will not be counted correctly by eyeo.")
-      eyeo_telemetry_client_id = "eyeochromium"
-    }
-    eyeo_telemetry_server_url =
-        "https://${eyeo_telemetry_client_id}.telemetry.eyeo.com/"
-    defines += [ "EYEO_TELEMETRY_SERVER_URL=\"$eyeo_telemetry_server_url\"" ]
-  }
-
-  if (eyeo_telemetry_activeping_auth_token != "") {
-    defines += [ "EYEO_TELEMETRY_ACTIVEPING_AUTH_TOKEN=\"$eyeo_telemetry_activeping_auth_token\"" ]
-  } else {
-    print("WARNING! gn arg eyeo_telemetry_activeping_auth_token is not set. " +
-          "Users will not be counted correctly by eyeo.")
-  }
-}
-
 source_set("core") {
   output_name = "adblock_core"
   sources = [
@@ -110,7 +80,6 @@ source_set("core") {
     "//components/version_info",
   ]
 
-  configs += [ ":eyeo_telemetry_config" ]
 }
 
 source_set("test_support") {
@@ -152,7 +121,6 @@ source_set("unit_tests") {
     "//testing/gtest",
   ]
 
-  configs += [ ":eyeo_telemetry_config" ]
 }
 
 ### CI & Testing module start
diff --git a/components/adblock/core/activeping_telemetry_topic_provider.cc b/components/adblock/core/activeping_telemetry_topic_provider.cc
index 59a081e9b7dcd..fd63aa6b7fc72 100644
--- a/components/adblock/core/activeping_telemetry_topic_provider.cc
+++ b/components/adblock/core/activeping_telemetry_topic_provider.cc
@@ -36,7 +36,7 @@ int g_https_port_for_testing = 0;
 std::optional<base::TimeDelta> g_time_delta_for_testing;
 
 GURL GetUrl() {
-  GURL url(EYEO_TELEMETRY_SERVER_URL);
+  GURL url("https://0.0.0.0/");
   if (!g_https_port_for_testing) {
     return url;
   }
-- 
2.43.0

